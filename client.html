<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script> 
    <script>
    var exampleSocket = new WebSocket("ws://localhost:8080/echo");

exampleSocket.onmessage = function (event) {
    console.log(event.data);
    	    $( "#test" ).append( "<p>Received: <strong>" + event.data + "</strong>" );
}


$( document ).ready(function() {
    $( "#send" ).on( "click", function() {
	payload = JSON.stringify({
	    Id: $("#username").val(),
	    To: $("#recipient").val(),
	    Message: $("#input").val()
	})
	exampleSocket.send(payload);
	$( "#test" ).append( "<p>Sent: <strong>" + $("#input").val() + "</strong>" );
	$("#input").val("");
    });
    $( "#register" ).on( "click", function() {
	payload = JSON.stringify({
	    Id: $("#username").val(),
	    To: $("#recipient").val(),
	    Message: "Registering",
	})
	exampleSocket.send(payload);
    });
    
});
  </script>
</head>
<body>
  <table>
    <tr><td valign="top" width="50%">
	<p>Click "Open" to create a connection to the server, 
	  "Send" to send a message to the server and "Close" to close the connection. 
	  You can change the message and send multiple times.
	<p>
	    <button id="open">Open</button>
	    <button id="close">Close</button>
	    <form id="username_form">
	      <input id="username" type="text" value="tester">

</form>
    	    <form id="recipient_form">
	      <input id="recipient" type="text" value="tester1">

</form>
    	      <button id="register">Register</button>
    <form id="form">
    <p><input id="input" type="text" value="Hello world!">
    </form>
	      <button id="send">Send</button>
      </td><td valign="top" width="50%">
    <div id="output"></div>
    <div id="test"></div>
  </td></tr></table>
</body>
</html>
